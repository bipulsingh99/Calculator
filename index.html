<htm>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- <h1>A simple calculator</h1> -->
    <div id="container">
      <div id="calculator">
        <div id="result">
          <div id="history"></div>
          <div id="output"></div>
        </div>
        <div id="keyboard">
          <button class="operator" id="clear">C</button>
          <button class="operator" id="backspace">CE</button>
          <button class="operator" id="%">%</button>
          <button class="operator" id="/">&#247;</button>
          <button class="number" id="7">7</button>
          <button class="number" id="8">8</button>
          <button class="number" id="9">9</button>
          <button class="operator" id="*">&times;</button>
          <button class="number" id="4">4</button>
          <button class="number" id="5">5</button>
          <button class="number" id="6">6</button>
          <button class="operator" id="-">-</button>
          <button class="number" id="1">1</button>
          <button class="number" id="2">2</button>
          <button class="number" id="3">3</button>
          <button class="operator" id="+">+</button>
          <button class="empty" id="empty"></button>
          <button class="number" id="0">0</button>
          <button class="empty" id="empty"></button>
          <button class="operator" id="=">=</button>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</htm>

package com.example.learnroomdatabase

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.widget.Toast
import com.example.learnroomdatabase.databinding.ActivityMainBinding
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.GlobalScope
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext

class MainActivity : AppCompatActivity() {

    private lateinit var binding: ActivityMainBinding
    private  lateinit var appDb: AppDatabase

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        binding=ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)
        //setContentView(R.layout.activity_main)

        appDb=AppDatabase.getDatabase(this)

        binding.btnReadData.setOnClickListener({
                readData()
            }
        )

        binding.btnWriteData.setOnClickListener({
            WriteData()
        })

        binding.btnDeleteAll.setOnClickListener({
            deleteAllData()
        })
    }
    private suspend fun displayData(student: Student)
    {

        withContext(Dispatchers.Main)
        {
            if(student.firstName==null)
            {
                Toast.makeText(this@MainActivity,"table empty",Toast.LENGTH_SHORT).show()
            }
            binding.tvFirstName.text=student.firstName + " " + student.lastName + " " + student.rollNo
//            binding.tvLastName.text=student.lastName
//            binding.tvRollNo.text=student.rollNo.toString()
        }
    }
    private  fun readData(){
        val rollno=binding.etRollNoRead.text.toString()

        if(rollno.isNotEmpty())
        {
            lateinit var student: Student

            GlobalScope.launch {
                student=appDb.studentDao().findByRoll(rollno.toInt())

                displayData(student)
            }

            binding.etRollNoRead.text.clear()
        }
    }

    private  fun WriteData(){

        val firstName= binding.etFirstName.text.toString()
        val lastName=binding.etLastName.text.toString()
        val rollNo = binding.etRollNo.text.toString()

        if(firstName.isNotEmpty()&&lastName.isNotEmpty()&&rollNo.isNotEmpty())
        {
            val student=Student(
                null,firstName,lastName,rollNo.toInt()
            )

            GlobalScope.launch(Dispatchers.IO){
                appDb.studentDao().insert(student)
            }
            binding.etFirstName.text.clear()
            binding.etLastName.text.clear()
            binding.etRollNo.text.clear()

            Toast.makeText(this,"successfully added",Toast.LENGTH_SHORT).show()
        }else
        {
            Toast.makeText(this,"please enter data",Toast.LENGTH_SHORT).show()
        }
    }

    private  fun deleteAllData(){
        GlobalScope.launch {

            appDb.studentDao().deleteAll()
        }
        binding.tvFirstName.text=""
        binding.tvLastName.text=""
        binding.tvRollNo.text=""
    }
}
